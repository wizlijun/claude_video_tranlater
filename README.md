# Claude Video Translator

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„è§†é¢‘å­—å¹•æå–ã€ç¿»è¯‘å’Œé…éŸ³å·¥å…·é“¾ï¼Œä½¿ç”¨ OpenAI Whisperã€Claude AI å’Œ IndexTTS å®ç°è§†é¢‘çš„æ™ºèƒ½å¤„ç†ã€‚

## ğŸš€ ä¸»è¦åŠŸèƒ½

- **æ™ºèƒ½å­—å¹•æå–**ï¼šä½¿ç”¨ Whisper è‡ªåŠ¨è¯†åˆ«è¯­è¨€å¹¶æå–å­—å¹•
- **AI ç¿»è¯‘**ï¼šé›†æˆ Claude AI è¿›è¡Œé«˜è´¨é‡å­—å¹•ç¿»è¯‘
- **è¯­éŸ³åˆæˆ**ï¼šä½¿ç”¨ IndexTTS ç”Ÿæˆè‡ªç„¶æµç•…çš„ä¸­æ–‡é…éŸ³
- **è§†é¢‘åå¤„ç†**ï¼šè‡ªåŠ¨ç”Ÿæˆå¸¦å­—å¹•å’Œé…éŸ³çš„æœ€ç»ˆè§†é¢‘
- **æ–­ç‚¹ç»­ä¼ **ï¼šæ”¯æŒå¤„ç†å¤±è´¥åçš„æ–­ç‚¹ç»­ä¼ åŠŸèƒ½
- **å¤šè¯­è¨€æ”¯æŒ**ï¼šæ”¯æŒå¤šç§æºè¯­è¨€å’Œç›®æ ‡è¯­è¨€

## ğŸ“ é¡¹ç›®ç»“æ„

### æ ¸å¿ƒè„šæœ¬

- **`get_srt_by_wisper.py`** - æ–°ç‰ˆå­—å¹•æå–è„šæœ¬ï¼Œé›†æˆæ™ºèƒ½ä¼˜åŒ–
- **`process_video_part1.sh`** - è§†é¢‘é¢„å¤„ç†ï¼ˆéŸ³é¢‘æå– + å­—å¹•è¯†åˆ«ï¼‰
- **`translate_by_claude.sh`** - ä½¿ç”¨ Claude AI ç¿»è¯‘å­—å¹•
- **`process_video_part2.sh`** - è§†é¢‘åå¤„ç†ï¼ˆTTS + å­—å¹• + æœ€ç»ˆåˆæˆï¼‰
- **`process_video_part2_plus.sh`** - å¢å¼ºç‰ˆè§†é¢‘åå¤„ç†

### è¾…åŠ©å·¥å…·

- **`genmarkdown_by_claude.sh`** - ç”Ÿæˆè§†é¢‘å†…å®¹çš„ Markdown æ–‡æ¡£
- **`post_to_bilibili.sh`** - å‘å¸ƒåˆ°å“”å“©å“”å“©
- **`post_to_xiaohongshu.sh`** - å‘å¸ƒåˆ°å°çº¢ä¹¦
- **`download_and_process.sh`** - ä¸‹è½½å¹¶å¤„ç†è§†é¢‘çš„å®Œæ•´æµç¨‹
- **`getvideo.sh`** - è§†é¢‘ä¸‹è½½å·¥å…·

## ğŸ› ï¸ ç¯å¢ƒä¾èµ–

### å¿…éœ€è½¯ä»¶

1. **FFmpeg** - éŸ³è§†é¢‘å¤„ç†
2. **Python 3.8+** - è„šæœ¬è¿è¡Œç¯å¢ƒ
3. **OpenAI Whisper** - è¯­éŸ³è¯†åˆ«
   ```bash
   pip install openai-whisper
   ```
4. **Claude CLI** - AI ç¿»è¯‘æœåŠ¡
5. **IndexTTS** - ä¸­æ–‡è¯­éŸ³åˆæˆ

### Python ä¾èµ–

```bash
pip install -r requirements.txt
```

## ğŸ“ ä½¿ç”¨æ–¹æ³•

### 1. å­—å¹•æå–ï¼ˆæ–°ç‰ˆï¼‰

ä½¿ç”¨æ–°ç‰ˆä¼˜åŒ–è„šæœ¬æå–å­—å¹•ï¼š

```bash
# è‡ªåŠ¨è¯­è¨€æ£€æµ‹
python3 get_srt_by_wisper.py video.mp4

# æŒ‡å®šè¯­è¨€
python3 get_srt_by_wisper.py video.mp4 -l en

# æŒ‡å®šè¾“å‡ºæ–‡ä»¶
python3 get_srt_by_wisper.py video.mp4 -o output.srt
```

### 2. å®Œæ•´å¤„ç†æµç¨‹

#### æ­¥éª¤ä¸€ï¼šè§†é¢‘é¢„å¤„ç†
```bash
# è‡ªåŠ¨è¯­è¨€æ£€æµ‹ï¼Œç¿»è¯‘ä¸ºä¸­æ–‡
./process_video_part1.sh video.mp4

# æŒ‡å®šè‹±è¯­ï¼Œç¿»è¯‘ä¸ºæ—¥è¯­
./process_video_part1.sh -l en --olang ja video.mp4

# å¤„ç†é«˜æ¸…è§†é¢‘
./process_video_part1.sh -hd video_hd.webm

# å¼ºåˆ¶é‡æ–°å¤„ç†
./process_video_part1.sh -f video.mp4
```

#### æ­¥éª¤äºŒï¼šå­—å¹•ç¿»è¯‘
```bash
# ç¿»è¯‘ä¸ºä¸­æ–‡ï¼ˆé»˜è®¤ï¼‰
./translate_by_claude.sh video.mp4

# ç¿»è¯‘ä¸ºå…¶ä»–è¯­è¨€
./translate_by_claude.sh --olang en video.mp4

# æ·»åŠ è‡ªå®šä¹‰ prompt
./translate_by_claude.sh -p "è¯·ä¿æŒæŠ€æœ¯æœ¯è¯­å‡†ç¡®" video.mp4
```

#### æ­¥éª¤ä¸‰ï¼šè§†é¢‘åå¤„ç†
```bash
# åŸºç¡€åå¤„ç†
./process_video_part2.sh video.mp4

# ä½¿ç”¨è‡ªå®šä¹‰è¯­éŸ³å’Œè¯­é€Ÿ
./process_video_part2.sh -v custom_voice.wav -s 1.3 video.mp4

# è°ƒæ•´å­—å¹•å¤§å°
./process_video_part2.sh --fsize 18 video.mp4
```

### 3. ä¸€é”®å¤„ç†

```bash
# ä¸‹è½½å¹¶å®Œæ•´å¤„ç†
./download_and_process.sh "YouTube_URL"
```

## âš™ï¸ é…ç½®è¯´æ˜

### è¯­è¨€ä»£ç æ”¯æŒ

- `auto` - è‡ªåŠ¨è¯†åˆ«
- `en` - è‹±è¯­
- `zh` - ä¸­æ–‡
- `ja` - æ—¥è¯­
- `ko` - éŸ©è¯­
- `fr` - æ³•è¯­
- `de` - å¾·è¯­
- `es` - è¥¿ç­ç‰™è¯­
- `ru` - ä¿„è¯­

### å¤„ç†æ¨¡å¼

- **æ™®é€šæ¨¡å¼**ï¼šæ ‡å‡†è´¨é‡å¤„ç†
- **é«˜æ¸…æ¨¡å¼ (-hd)**ï¼šå¤„ç†é«˜æ¸…åˆ†ç¦»çš„éŸ³è§†é¢‘æ–‡ä»¶
- **å¼ºåˆ¶æ¨¡å¼ (-f)**ï¼šå¿½ç•¥å·²æœ‰æ–‡ä»¶ï¼Œé‡æ–°å¤„ç†æ‰€æœ‰æ­¥éª¤

## ğŸ“Š æ–°ç‰ˆå­—å¹•æå–ç‰¹æ€§

`get_srt_by_wisper.py` ç›¸æ¯”åŸç‰ˆè„šæœ¬çš„æ”¹è¿›ï¼š

1. **æ™ºèƒ½è¯­è¨€æ£€æµ‹**ï¼šè‡ªåŠ¨è¯†åˆ«éŸ³é¢‘è¯­è¨€å¹¶åº”ç”¨ç›¸åº”ä¼˜åŒ–ç­–ç•¥
2. **å¤šè¯­è¨€ä¼˜åŒ–**ï¼š
   - ä¸­æ—¥éŸ©è¯­è¨€ä½¿ç”¨ aggressive segmentation é…ç½®
   - å…¶ä»–è¯­è¨€ä½¿ç”¨è¯çº§æ—¶é—´æˆ³çš„æ•´å¥åˆ†å‰²
3. **å­—å¹•ä¼˜åŒ–**ï¼š
   - è‡ªåŠ¨åˆå¹¶çŸ­å¥
   - æ™ºèƒ½æ—¶é—´æˆ³è°ƒæ•´
   - å™ªéŸ³è¿‡æ»¤
4. **æ›´å¥½çš„é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„ä¾èµ–æ£€æŸ¥å’Œé”™è¯¯æç¤º
5. **ç»Ÿä¸€æ¥å£**ï¼šç®€åŒ–çš„å‘½ä»¤è¡Œå‚æ•°

## ğŸ”„ å·¥ä½œæµç¨‹

```
åŸè§†é¢‘ â†’ éŸ³é¢‘æå– â†’ Whisperè¯†åˆ« â†’ å­—å¹•ä¼˜åŒ– â†’ Claudeç¿»è¯‘ â†’ TTSé…éŸ³ â†’ è§†é¢‘åˆæˆ â†’ æœ€ç»ˆè¾“å‡º
```

### ä¸´æ—¶æ–‡ä»¶ç»“æ„

```
{video_name}_temp/
â”œâ”€â”€ original_audio.wav          # æå–çš„éŸ³é¢‘
â”œâ”€â”€ step2_whisper.srt          # Whisperè¯†åˆ«çš„å­—å¹•
â”œâ”€â”€ step3_translated.srt       # Claudeç¿»è¯‘çš„å­—å¹•
â”œâ”€â”€ step5_chinese_audio.wav    # TTSç”Ÿæˆçš„é…éŸ³
â””â”€â”€ xiaohongshu.md            # ç”Ÿæˆçš„æ–‡æ¡£
```

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **æ–­ç‚¹ç»­ä¼ **ï¼šè„šæœ¬è‡ªåŠ¨æ£€æµ‹å·²æœ‰æ–‡ä»¶ï¼Œæ”¯æŒä»ä¸­æ–­å¤„ç»§ç»­
2. **æ–‡ä»¶å‘½å**ï¼šæ”¯æŒåˆ†ç¦»ä¸‹è½½çš„éŸ³è§†é¢‘æ–‡ä»¶ï¼ˆå¦‚ `_hd_video.webm` å’Œ `_hd_audio.webm`ï¼‰
3. **èµ„æºå ç”¨**ï¼šWhisper å’Œ TTS å¤„ç†éœ€è¦è¾ƒå¤šè®¡ç®—èµ„æº
4. **API é™åˆ¶**ï¼šClaude API æœ‰è°ƒç”¨é¢‘ç‡é™åˆ¶

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Whisper å®‰è£…å¤±è´¥**
   ```bash
   pip install --upgrade openai-whisper
   ```

2. **FFmpeg æœªæ‰¾åˆ°**
   ```bash
   # macOS
   brew install ffmpeg
   
   # Ubuntu
   sudo apt install ffmpeg
   ```

3. **Claude CLI é…ç½®**
   ```bash
   # è®¾ç½® API Key
   export ANTHROPIC_API_KEY="your_api_key"
   ```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä½¿ç”¨ MIT è®¸å¯è¯ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“š æ›´æ–°æ—¥å¿—

### v2.0 (æœ€æ–°)
- âœ¨ æ–°å¢ `get_srt_by_wisper.py` ç»Ÿä¸€å­—å¹•æå–è„šæœ¬
- ğŸš€ ç®€åŒ–äº† `process_video_part1.sh` çš„å¤æ‚é€»è¾‘
- ğŸ¯ æ”¹è¿›äº†å¤šè¯­è¨€æ”¯æŒå’Œå­—å¹•ä¼˜åŒ–ç®—æ³•
- ğŸ”§ ä¼˜åŒ–äº†é”™è¯¯å¤„ç†å’Œç”¨æˆ·ä½“éªŒ

### v1.0
- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ“ åŸºç¡€çš„è§†é¢‘å­—å¹•æå–ã€ç¿»è¯‘å’Œé…éŸ³åŠŸèƒ½